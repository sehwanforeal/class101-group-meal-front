{"ast":null,"code":"var _jsxFileName = \"/Users/sehwan/secode/group_meal_front/src/Pages/Signin/Signin.js\";\nimport React, { Component } from \"react\";\nimport \"./Signin.scss\";\nimport Icon from \"Components/Nav/Icon\";\nimport axios from \"axios\";\nimport { url, client_id, client_secret } from \"config\";\nexport class Signin extends Component {\n  constructor() {\n    super();\n\n    this.getQueryString = url => {\n      const startIndex = url.indexOf(\"=\") + 1;\n      const endIndex = url.indexOf(\"&\");\n      const query = startIndex && endIndex ? url.slice(startIndex, endIndex) : null;\n      return query;\n    };\n\n    this.fetchAuth = async () => {\n      const code = this.getQueryString(window.location.href);\n      const response = code && (await axios(\"\".concat(url, \"slack?code=\").concat(code, \"&\").concat(client_id, \"&\").concat(client_secret)));\n      const access_token = response && response.data.access_token;\n      sessionStorage.setItem(\"access_token\", access_token);\n\n      if (sessionStorage.getItem(\"access_token\").length > 10) {\n        this.props.history.push(\"/roulette\");\n      }\n    };\n\n    this.state = {};\n  }\n\n  //50ca812413faf339cd2848f42b8762dd\n  //client_id=854668779588.857346823878\n  componentDidMount() {\n    this.fetchAuth();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"signin-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"signin-span\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, \"EX ADMIN\"), React.createElement(\"a\", {\n      href: \"https://slack.com/oauth/authorize?scope=identity.basic,identity.email&\".concat(client_id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"Sign in with Slack\",\n      src: \"https://platform.slack-edge.com/img/sign_in_with_slack.png\",\n      srcset: \"https://platform.slack-edge.com/img/sign_in_with_slack.png 1x, https://platform.slack-edge.com/img/sign_in_with_slack@2x.png 2x\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    })));\n  }\n\n}\nexport default Signin;","map":{"version":3,"sources":["/Users/sehwan/secode/group_meal_front/src/Pages/Signin/Signin.js"],"names":["React","Component","Icon","axios","url","client_id","client_secret","Signin","constructor","getQueryString","startIndex","indexOf","endIndex","query","slice","fetchAuth","code","window","location","href","response","access_token","data","sessionStorage","setItem","getItem","length","props","history","push","state","componentDidMount","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,eAAP;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,EAAcC,SAAd,EAAyBC,aAAzB,QAA8C,QAA9C;AAEA,OAAO,MAAMC,MAAN,SAAqBN,SAArB,CAA+B;AACpCO,EAAAA,WAAW,GAAG;AACZ;;AADY,SAKdC,cALc,GAKGL,GAAG,IAAI;AACtB,YAAMM,UAAU,GAAGN,GAAG,CAACO,OAAJ,CAAY,GAAZ,IAAmB,CAAtC;AACA,YAAMC,QAAQ,GAAGR,GAAG,CAACO,OAAJ,CAAY,GAAZ,CAAjB;AAEA,YAAME,KAAK,GACTH,UAAU,IAAIE,QAAd,GAAyBR,GAAG,CAACU,KAAJ,CAAUJ,UAAV,EAAsBE,QAAtB,CAAzB,GAA2D,IAD7D;AAGA,aAAOC,KAAP;AACD,KAba;;AAAA,SAqBdE,SArBc,GAqBF,YAAY;AACtB,YAAMC,IAAI,GAAG,KAAKP,cAAL,CAAoBQ,MAAM,CAACC,QAAP,CAAgBC,IAApC,CAAb;AACA,YAAMC,QAAQ,GACZJ,IAAI,KACH,MAAMb,KAAK,WAAIC,GAAJ,wBAAqBY,IAArB,cAA6BX,SAA7B,cAA0CC,aAA1C,EADR,CADN;AAIA,YAAMe,YAAY,GAAGD,QAAQ,IAAIA,QAAQ,CAACE,IAAT,CAAcD,YAA/C;AACAE,MAAAA,cAAc,CAACC,OAAf,CAAuB,cAAvB,EAAuCH,YAAvC;;AAEA,UAAIE,cAAc,CAACE,OAAf,CAAuB,cAAvB,EAAuCC,MAAvC,GAAgD,EAApD,EAAwD;AACtD,aAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,WAAxB;AACD;AACF,KAjCa;;AAEZ,SAAKC,KAAL,GAAa,EAAb;AACD;;AAYD;AACA;AACAC,EAAAA,iBAAiB,GAAG;AAClB,SAAKhB,SAAL;AACD;;AAgBDiB,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAM,MAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,EAGE;AACE,MAAA,IAAI,kFAA2E3B,SAA3E,CADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGE;AACE,MAAA,GAAG,EAAC,oBADN;AAEE,MAAA,GAAG,EAAC,4DAFN;AAGE,MAAA,MAAM,EAAC,iIAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CAHF,CADF;AAeD;;AApDmC;AAuDtC,eAAeE,MAAf","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Signin.scss\";\nimport Icon from \"Components/Nav/Icon\";\nimport axios from \"axios\";\nimport { url, client_id, client_secret } from \"config\";\n\nexport class Signin extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  getQueryString = url => {\n    const startIndex = url.indexOf(\"=\") + 1;\n    const endIndex = url.indexOf(\"&\");\n\n    const query =\n      startIndex && endIndex ? url.slice(startIndex, endIndex) : null;\n\n    return query;\n  };\n\n  //50ca812413faf339cd2848f42b8762dd\n  //client_id=854668779588.857346823878\n  componentDidMount() {\n    this.fetchAuth();\n  }\n\n  fetchAuth = async () => {\n    const code = this.getQueryString(window.location.href);\n    const response =\n      code &&\n      (await axios(`${url}slack?code=${code}&${client_id}&${client_secret}`));\n\n    const access_token = response && response.data.access_token;\n    sessionStorage.setItem(\"access_token\", access_token);\n\n    if (sessionStorage.getItem(\"access_token\").length > 10) {\n      this.props.history.push(\"/roulette\");\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"signin-body\">\n        <Icon />\n        <span className=\"signin-span\">EX ADMIN</span>\n        <a\n          href={`https://slack.com/oauth/authorize?scope=identity.basic,identity.email&${client_id}`}\n        >\n          <img\n            alt=\"Sign in with Slack\"\n            src=\"https://platform.slack-edge.com/img/sign_in_with_slack.png\"\n            srcset=\"https://platform.slack-edge.com/img/sign_in_with_slack.png 1x, https://platform.slack-edge.com/img/sign_in_with_slack@2x.png 2x\"\n          />\n        </a>\n      </div>\n    );\n  }\n}\n\nexport default Signin;\n"]},"metadata":{},"sourceType":"module"}